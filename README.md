# Hik USB Camera Test with OpenCV

`test_hik_usb.py` - –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –≤–∏–¥–µ–æ —Å USB3-–∫–∞–º–µ—Ä—ã Hikrobot (MV-CS060-10UC-PRO) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Hikvision SDK** –∏ **OpenCV**.
`test_hik_usb_withGUI.py` - –ó–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ —Å –∫–∞–º–µ—Ä—ã –æ–±–µ—Ä–Ω—É—Ç—ã–π –≤ GUI **PySide6**

![–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã](docs/example.png)  
*(–ü—Ä–∏–º–µ—Ä: –∑–∞—Ö–≤–∞—Ç –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–æ–≤ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ 3072√ó2048 —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –æ–∫–Ω–µ 800√ó600)*

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–µ—Ä–≤–æ–π USB-–∫–∞–º–µ—Ä—ã Hikrobot
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Bayer RG8 (—Å fallback –Ω–∞ Mono8)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ FPS –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ (–ø–æ 'q' –∏–ª–∏ Ctrl+C)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ –º–æ–¥–µ–ª–∏ **MV-CS060-10UC-PRO** (Sony IMX178) –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ 3072√ó2048 ‚Üí FPS ‚âà 58‚Äì60, –∫–∞–º–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É USB3-–ø–æ—Ä—Ç—É.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **Hikrobot MVS**: Machine Vision Software MVS V4.6.3
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **Hikrobot SDK**: Machine Vision Industrial Camera SDK V4.7.0 Runtime Package
- –°–∫–∞—á–∞—Ç—å: https://www.hikrobotics.com/en/machinevision/service/download 
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã: `CameraParams_const.py`, `CameraParams_header.py`, `MvCameraControl_class.py`, `MvErrorDefine_const.py` –∏ `PixelType_header.py` –∏–∑ `C:\Program Files (x86)\MVS\Development\Samples\Python\MvImport\` –≤ –ø–∞–ø–∫—É —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ `Python 3.12.10`
- –¢—Ä–µ–±—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
    ```bash
    pip install numpy opencv-python
    ```
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å GUI `test_hik_usb_withGUI.py`
    ```bash
    pip install PySide6
    ```

## –ó–∞–ø—É—Å–∫

1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É –ø–æ USB
2. –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç:
    ```bash
    python test_hik_usb.py
    ```
    –∏–ª–∏
    ```bash
    python test_hik_usb_withGUI.py
    ```
3. –ù–∞–∂–º–∏ `q` –¥–ª—è –≤—ã—Ö–æ–¥–∞

![–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å](docs/console.png)  
*(–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —ç—Ç–∞–ø–æ–≤ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã)*

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ test_hik_usb.py             # –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ test_hik_usb_withGUI.py     # —Ä–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç —Å GUI PySide6
‚îú‚îÄ‚îÄ CameraParams_const.py       # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îú‚îÄ‚îÄ CameraParams_header.py      # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îú‚îÄ‚îÄ MvCameraControl_class.py    # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îú‚îÄ‚îÄ MvErrorDefine_const.py      # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îú‚îÄ‚îÄ MvISPErrorDefine_const.py   # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îú‚îÄ‚îÄ PixelType_header.py         # –∏–∑ SDK (–∏–∑ Hikrobot SDK)
‚îî‚îÄ‚îÄ README.md                   # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

> –§–∞–π–ª—ã –∏–∑ SDK (MvCameraControl_class.py, PixelType_header.py...) –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω—ã Hikrobot –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∑—è—Ç—ã –∏–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ MVS

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License
–ú–æ–∂–µ—à—å —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å.
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–µ ‚Äî –±—É–¥—É —Ä–∞–¥ —É–ø–æ–º–∏–Ω–∞–Ω–∏—é –∏–ª–∏ –∑–≤—ë–∑–¥–æ—á–∫–µ ‚≠ê

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–º–æ–≥ ‚Äî –ø–æ—Å—Ç–∞–≤—å ‚≠ê —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é, –±—É–¥–µ—Ç –ø—Ä–∏—è—Ç–Ω–æ üòÑ


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

### –ö–∞–∫ —É–±–µ–¥–∏—Ç—å—Å—è –Ω–∞ 100%, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –ø–∞—Ç—Ç–µ—Ä–Ω —É —Ç–≤–æ–µ–π –∫–∞–º–µ—Ä—ã

–ó–∞–π–¥–∏ –≤ **MVS —Å–æ—Ñ—Ç** (Hikrobot MVS) ‚Üí Device ‚Üí Features ‚Üí Image ‚Üí Pixel Format
–¢–∞–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–æ Bayer RG 8 –∏–ª–∏ Bayer GR 8 –∏–ª–∏ Bayer GB 8 –∏–ª–∏ Bayer BG 8.

![–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã](docs/cam_pixel_format.jpg)

–°–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ **–∫—Ä–∞—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–∞—Å–Ω—É—é —Ä—É—á–∫—É/–ø–æ–º–∞–¥—É/—è–±–ª–æ–∫–æ):
 - –µ—Å–ª–∏ –∫—Ä–∞—Å–Ω—ã–π ‚Üí —Å–∏–Ω–∏–π/–≥–æ–ª—É–±–æ–π –æ—Ç—Ç–µ–Ω–æ–∫ ‚Üí —ç—Ç–æ Bayer **RG** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `COLOR_BayerRG2BGR`
 - –µ—Å–ª–∏ –∫—Ä–∞—Å–Ω—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π ‚Üí —ç—Ç–æ Bayer **BG** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `COLOR_BayerBG2BGR`

